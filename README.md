# SkillFactory: DEVOPS. Практикум. Модуль 23. Управление конфигурациями

## Задание

### Задание 23.1
Добавьте нового пользователя с авторизацией по ключу.

### Задание 23.2
Поднимите nginx server.

### Задание 23.3
Поднимите php-fpm на 9000 порту.

### Задание 23.4
Укажите в nginx отправлять php на 9000 порт.

### Задание 23.5
Разделите tasks на роли:
- «Добавьте нового пользователя с авторизацией по ключу» — роль «users».
- «Поднимите nginx server», «Укажите в nginx отправлять php на 9000 порт» — роль «http».
- «Поднимите php-fpm», «Укажите php-fpm принимать на 9000 порт»— роль «php».

### Задание 23.6
Поднимите nginx и php-fpm на разных серверах:
- Для nginx сервера используйте роль «users» «http».
- Для php-fpm сервера используйте роль «users» «php».

## Решение
Для решения создан anslible playbook, который:
- на локальной машине установит и настроит LXD (роль lxd_server);
- создаст два контейнера conf-management-1, conf-management-2 которые эмулирую инфраструктуру (роль lxd_containers);
- установит docker на оба контейнера (роль docker);
- создаст пользователя на контейнере и импортирует ssh ключ (роль users);
- создаст контейнер с php-fpm на conf-management-1;
- создаст контейнер с nginx на conf-management-2 с конфигурационным файлом, указывающим на php-fm conf-management-1;

Для использования выполните следующие действия:
1. скопировать данный репозиторий;
2. перейти в папку с репозиторием;
3. перейти в папку other;
4. последовательно выполнить файлы *.sh
5. перейти в браузере по адресу http://10.0.3.150 и наблюдать выводл phpinfo.

![phpinfo](https://user-images.githubusercontent.com/68784501/110241890-51288800-7f64-11eb-879b-0a56a8b88d9e.png)
